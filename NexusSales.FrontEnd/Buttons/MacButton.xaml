<UserControl x:Class="NexusSales.FrontEnd.Buttons.MacButton"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d" 
             d:DesignHeight="16" d:DesignWidth="16">

    <UserControl.Resources>
        <Storyboard x:Key="HoverIn">
            <DoubleAnimation Storyboard.TargetName="buttonEllipse" 
                             Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleX)" 
                             To="1.2" Duration="0:0:0.2" />
            <DoubleAnimation Storyboard.TargetName="buttonEllipse" 
                             Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)" 
                             To="1.2" Duration="0:0:0.2" />
            <DoubleAnimation Storyboard.TargetName="glowBorder" 
                             Storyboard.TargetProperty="Opacity" 
                             To="1.0" Duration="0:0:0.2" />
        </Storyboard>

        <Storyboard x:Key="HoverOut">
            <DoubleAnimation Storyboard.TargetName="buttonEllipse" 
                             Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleX)" 
                             To="1.0" Duration="0:0:0.2" />
            <DoubleAnimation Storyboard.TargetName="buttonEllipse" 
                             Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)" 
                             To="1.0" Duration="0:0:0.2" />
            <DoubleAnimation Storyboard.TargetName="glowBorder" 
                             Storyboard.TargetProperty="Opacity" 
                             To="0" Duration="0:0:0.2" />
        </Storyboard>
    </UserControl.Resources>

    <Button Command="{Binding Command, RelativeSource={RelativeSource AncestorType=UserControl}}"
            ToolTip="{Binding ToolTipText, RelativeSource={RelativeSource AncestorType=UserControl}}" 
            Cursor="Hand">
        <Button.Template>
            <ControlTemplate TargetType="Button">
                <Grid>
                    <Ellipse x:Name="buttonEllipse" 
                             Fill="{Binding ButtonColor, RelativeSource={RelativeSource AncestorType=UserControl}}"
                             RenderTransformOrigin="0.5,0.5">
                        <Ellipse.RenderTransform>
                            <ScaleTransform ScaleX="1" ScaleY="1"/>
                        </Ellipse.RenderTransform>
                    </Ellipse>
                    <Border x:Name="glowBorder" 
                            Background="{Binding ButtonColor, RelativeSource={RelativeSource AncestorType=UserControl}}" 
                            CornerRadius="8" 
                            Opacity="0"
                            Margin="-6">
                        <Border.Effect>
                            <BlurEffect Radius="24" KernelType="Gaussian" />
                        </Border.Effect>
                    </Border>
                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                </Grid>
                <ControlTemplate.Triggers>
                    <EventTrigger RoutedEvent="MouseEnter">
                        <BeginStoryboard Storyboard="{StaticResource HoverIn}" />
                    </EventTrigger>
                    <EventTrigger RoutedEvent="MouseLeave">
                        <BeginStoryboard Storyboard="{StaticResource HoverOut}" />
                    </EventTrigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Button.Template>
    </Button>
</UserControl>